!function(a,b,c){"use strict";function U(a,b){var c=!1;return function(){c||(a.call(),c=!0,setTimeout(function(){c=!1},b))}}function V(){t&&T.hide(),a(b).on("touchstart.testMouse",function(){a(b).off("touchstart.testMouse"),u=!0,T.addClass("mobile")}),P.off().on("click",q.toggle),Q.off().on("click","a",o.click),s&&T.addClass("msie"),T.off().on("click","img",function(a){a.stopPropagation()}),a(b.body).append(T),p=b.documentElement}function W(a,b,c){1==b?(H.css({transform:"translateX(25%)",transition:".2s",opacity:0}),setTimeout(function(){r(m)},200)):-1==b&&(H.css({transform:"translateX(-25%)",transition:".2s",opacity:0}),setTimeout(function(){r(n)},200)),1==c?L.prop("checked",!0):-1==c&&L.prop("checked",!1)}function X(a){var c,d=b.createElement("p").style,e=["ms","O","Moz","Webkit"];if(""==d[a])return a;for(a=a.charAt(0).toUpperCase()+a.slice(1),c=e.length;c--;)if(""==d[e[c]+a])return e[c]+a}function Y(b){var c=b.keyCode,d=f.keys;return a.inArray(c,d.close)>=0&&la()||a.inArray(c,d.next)>=0&&!f.single&&aa(n)||a.inArray(c,d.prev)>=0&&!f.single&&aa(m)||!0}function Z(a,b,c){1==c?aa(n):-1==c&&aa(m)}function $(){var a="pbPrevBtn"==this.id?m:n;return aa(a),!1}function _(a){k=i,i=a,j=g[a][0],m=(i||(f.loop?g.length:0))-1,n=(i+1)%g.length||(f.loop?0:-1)}function aa(a){if(!f.loop){var b=i==g.length-1&&a==n,c=0==i&&a==m;if(b||c)return}r(a)}function ba(){var b=g[i][0],c=a("<a>").prop("href",g[i][0])[0].search?"&":"?";return b+=c+"vq=hd720&wmode=opaque",a("<iframe>").prop({scrolling:"no",frameborder:0,allowTransparency:!0,src:b}).attr({webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0})}function ca(){if(N.off(B).removeClass("change"),f.counter){try{var a=f.counter.replace("A",i+1).replace("B",g.length)}catch(b){f.counter="(A/B)",ca()}M.find(".counter").text(a)}f.title&&M.find(".title").html("<span>"+g[i][1]+"</span>")}function ea(){T.addClass("error"),H[0].src=y,D.onerror=null}function fa(a){function d(){clearTimeout(c),b.off(B).css({transition:"none"}),T.removeClass("video"),"video"==l?(H[0].src=y,I.addClass("prepare"),T.addClass("video")):H.prop({src:j,"class":"prepare"}),setTimeout(function(){H.add(I).removeAttr("style").removeClass("prepare"),T.removeClass("pbHide next prev"),setTimeout(function(){H.add(I).on(B,ga),s&&ga()},0)},50)}var b,c;c=setTimeout(d,2e3),O.fadeOut(300,function(){T.removeClass("pbLoading"),O.removeAttr("style")}),T.addClass("pbHide"),H.add(I).removeAttr("style").removeClass("zoomable"),a||"video"!=h[k].rel?b=H:(b=I,H.addClass("prepare")),a||s?d():b.on(B,d)}function ga(){H.add(I).off(B).addClass("zoomable"),"video"==l?I.removeClass("pbHide"):P&&f.autoplay&&q.play(),e&&"function"==typeof e.callback&&e.callback.apply(h[i])}function ha(c,d,e){if(e)return!1;if("video"==l){var f=I.data("zoom")||1;if(f+=d/10,.5>f)return!1;I.data("zoom",f).css({width:624*f,height:351*f})}else{var f=H.data("zoom")||1,g=H[0].getBoundingClientRect();f+=d/10,.1>f&&(f=.1),C(function(){H.data("zoom",f).css({transform:"scale("+f+")"})}),g.height>p.clientHeight||g.width>p.clientWidth?a(b).on("mousemove.photobox",ja):(a(b).off("mousemove.photobox"),H[0].style[z]="50% 50%")}return!1}function ia(a,b){a.preventDefault(),a.stopPropagation();var d,c=e.thumbsList;c.css("height",c[0].clientHeight+10*b),d=M[0].clientHeight/2,R[0].style.cssText="margin-top: -"+d+"px; padding: "+d+"px 0;",Q.hide().show(0)}function ja(a){var b=a.clientY/p.clientHeight*(p.clientHeight+200)-100,c=b/p.clientHeight*100,d=a.clientX/p.clientWidth*100,e=d.toFixed(2)+"% "+c.toFixed(2)+"%";C(function(){H[0].style[z]=e})}function ka(){clearTimeout(q.autoPlayTimer),a(b).off("mousemove.photobox"),D.onload=function(){},D.src=E.src=F.src=j}function la(){function b(){""!=T[0].className&&(T.removeClass("show pbHide error pbLoading"),H.removeAttr("class").removeAttr("style").off().data("zoom",1),H[0].src=y,M.find(".title").empty(),t&&setTimeout(function(){T.hide()},200),f.hideFlash&&a("iframe, object, embed").css("visibility","visible"))}return T.hasClass("show")?(ka(),I.find("iframe").prop("src","").empty(),d.prototype.setup(),da.clear(),T.removeClass("on video").addClass("pbHide"),i=-1,H.on(B,b),s&&b(),setTimeout(function(){e=null},1e3),setTimeout(b,500),void("function"==typeof f.afterClose&&f.afterClose(T))):!1}var d,e,f,h,j,k,l,m,n,o,p,q,r,G,H,I,J,K,L,M,N,O,P,Q,R,g=[],i=-1,s=!("placeholder"in b.createElement("input")),t=function(){var b=a("<p>")[0];return b.style.cssText="pointer-events:auto",!b.style.pointerEvents}(),u=!1,x=a(),y="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",z=X("transformOrigin"),A=X("transition"),B="transitionend webkitTransitionEnd oTransitionEnd otransitionend",C=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},D={},E=new Image,F=new Image,S={single:!1,beforeShow:null,afterClose:null,loop:!0,thumb:null,thumbs:!0,thumbAttr:"data-src",counter:"(A/B)",title:!0,autoplay:!1,time:3e3,history:!1,hideFlash:!0,zoomable:!0,wheelNextPrev:!0,keys:{close:[27,88,67],prev:[37,80],next:[39,78]}},T=a('<div id="pbOverlay">').append(L=a('<input type="checkbox" id="pbThumbsToggler" checked hidden>'),O=a('<div class="pbLoader"><b></b><b></b><b></b></div>'),J=a('<div id="pbPrevBtn" class="prevNext"><b></b></div>').on("click",$),K=a('<div id="pbNextBtn" class="prevNext"><b></b></div>').on("click",$),R=a('<div class="pbWrapper">').append(H=a("<img>"),I=a("<div>")),G=a('<div id="pbCloseBtn">').on("click",la)[0],P=a('<div id="pbAutoplayBtn">').append(a('<div class="pbProgress">')),M=a('<div id="pbCaption">').append('<label for="pbThumbsToggler" title="thumbnails on/off"></label>',N=a('<div class="pbCaptionText">').append('<div class="title"></div><div class="counter">'),Q=a("<div>").addClass("pbThumbs")));a.fn.photobox=function(b,c,f){return this.each(function(){var g,h=a(this).data("_photobox");return h?("destroy"===b&&h.destroy(),this):("string"!=typeof b&&(b="a"),"prepareDOM"===b?(V(),this):(g=a.extend({},S,c||{}),e=new d(g,this,b),a(this).data("_photobox",e),void(e.callback=f)))})},d=function(c,d,e){this.options=a.extend({},c),this.target=e,this.selector=a(d||b),this.thumbsList=null;var f=this.imageLinksFilter(this.selector.find(e));this.imageLinks=f[0],this.images=f[1],this.init()},d.prototype={init:function(){var a=this;this.selector.one("mouseenter.photobox",this.target,function(b){a.thumbsList=o.generate.apply(a)}),this.selector.on("click.photobox",this.target,function(b){b.preventDefault(),a.open(this)}),this.observerTimeout=null,s||1!=this.selector[0].nodeType||this.observeDOM(this.selector[0],this.onDOMchanges.bind(this))},onDOMchanges:function(){var a=this;clearTimeout(this.observerTimeout),a.observerTimeout=setTimeout(function(){var f,b=a.imageLinksFilter(a.selector.find(a.target)),c=0,d=!1;if(a.imageLinks.length!=b[0].length){if(a.imageLinks=b[0],a.images=b[1],e&&a.selector==e.selector)for(g=a.images,h=a.imageLinks,f=g.length;f--;)g[f][0]==j&&(d=!0);a.thumbsList=o.generate.apply(a),Q.html(a.thumbsList),a.images.length&&j&&a.options.thumbs&&(c=a.thumbsList.find('a[href="'+j+'"]').eq(0).parent().index(),-1==c&&(c=0),o.changeActive(c,0))}},50)},open:function(b){var c=a.inArray(b,this.imageLinks);return-1==c?!1:(f=this.options,g=this.images,h=this.imageLinks,e=this,this.setup(1),T.on(B,function(){T.off(B).addClass("on"),r(c,!0)}).addClass("show"),s&&T.trigger("MSTransitionEnd"),!1)},imageLinksFilter:function(b){var f,c=this,d=[],e={};return[b.filter(function(b){var h,g=a(this),i="";return e.content=g[0].getAttribute("title")||"",c.options.thumb&&(h=g.find(c.options.thumb)[0]),c.options.thumb&&h||(h=g.find("img")[0]),h&&(f=h.getAttribute("data-pb-captionlink"),i=h.getAttribute(c.options.thumbAttr)||h.getAttribute("src"),e.content=h.getAttribute("alt")||h.getAttribute("title")||""),f&&(f=f.split("["),2==f.length?(e.linkText=f[0],e.linkHref=f[1].slice(0,-1)):(e.linkText=f,e.linkHref=f),e.content+=' <a href="'+e.linkHref+'">'+e.linkText+"</a>"),d.push([g[0].href,e.content,i]),!0}),d]},observeDOM:function(){var a=c.MutationObserver||c.WebKitMutationObserver,b=c.addEventListener;return function(c,d){if(a){var e=this,f=new a(function(a,b){(a[0].addedNodes.length||a[0].removedNodes.length)&&d(e)});f.observe(c,{childList:!0,subtree:!0})}else b&&(c.addEventListener("DOMNodeInserted",d.bind(e),!1),c.addEventListener("DOMNodeRemoved",d.bind(e),!1))}}(),setup:function(d){var e=d?"on":"off";f.thumbs&&(u||Q[e]("mouseenter.photobox",o.calc)[e]("mousemove.photobox",o.move)),d?(H.css({transition:"0s"}).removeAttr("style"),T.show(),Q.html(this.thumbsList).trigger("mouseenter.photobox"),f.thumbs?T.addClass("thumbs"):(L.prop("checked",!1),T.removeClass("thumbs")),this.images.length<2||f.single?T.removeClass("thumbs hasArrows hasCounter hasAutoplay"):(T.addClass("hasArrows hasCounter"),f.time>1e3?(T.addClass("hasAutoplay"),f.autoplay?q.progress.start():q.pause()):T.removeClass("hasAutoplay")),f.hideFlash&&a("iframe, object, embed").css("visibility","hidden")):a(c).off("resize.photobox"),a(b).off("keydown.photobox")[e]({"keydown.photobox":Y}),u&&(T.removeClass("hasArrows"),R[e]("swipe",W)),f.zoomable&&(T[e]({"mousewheel.photobox":ha}),s||Q[e]({"mousewheel.photobox":ia})),!f.single&&f.wheelNextPrev&&T[e]({"mousewheel.photobox":U(Z,1e3)})},destroy:function(){f=this.options,this.selector.off("click.photobox",this.target).removeData("_photobox"),la()}},o=function(){var h,i,l,m,b=0,c=0,d=0,e=0,g=null;return{generate:function(){var e,f,g,h,i,b=a("<ul>"),c=[],d=this.imageLinks.size();for(i=0;d>i;i++)g=this.imageLinks[i],f=this.images[i][2],f&&(e=this.images[i][1],h=g.rel?" class='"+g.rel+"'":"",c.push("<li"+h+'><a href="'+g.href+'"><img src="'+f+'" alt="" title="'+e+'" /></a></li>'));return b.html(c.join("")),b},click:function(b){b.preventDefault(),x.removeClass("active"),x=a(this).parent().addClass("active");var c=a(this.parentNode).index();return r(c,0,1)},changeActiveTimeout:null,changeActive:function(a,b,c){if(f.thumbs){x.index();x.removeClass("active"),x=Q.find("li").eq(a).addClass("active"),!c&&x[0]&&(clearTimeout(this.changeActiveTimeout),this.changeActiveTimeout=setTimeout(function(){var a=x[0].offsetLeft+x[0].clientWidth/2-p.clientWidth/2;b?Q.delay(800):Q.stop(),Q.animate({scrollLeft:a},500,"swing")},200))}},calc:function(a){return i=Q[0],b=i.clientWidth,c=i.scrollWidth,h=.15*b,d=Q.offset().left,e=a.pageX-h-d,m=e/(b-2*h),l=(c-b)*m,Q.animate({scrollLeft:l},200),clearTimeout(g),g=setTimeout(function(){g=null},200),this},move:function(a){if(!g){var j,k,f=a.pageX-h-d;0>f&&(f=0),j=f/(b-2*h),k=(c-b)*j,C(function(){i.scrollLeft=k})}}}}(),q={autoPlayTimer:!1,play:function(){q.autoPlayTimer=setTimeout(function(){r(n)},f.time),q.progress.start(),P.removeClass("play"),q.setTitle("Click to stop autoplay"),f.autoplay=!0},pause:function(){clearTimeout(q.autoPlayTimer),q.progress.reset(),P.addClass("play"),q.setTitle("Click to resume autoplay"),f.autoplay=!1},progress:{reset:function(){P.find("div").removeAttr("style"),setTimeout(function(){P.removeClass("playing")},200)},start:function(){s||P.find("div").css(A,f.time+"ms"),P.addClass("playing")}},setTitle:function(a){a&&P.prop("title",a+" (every "+f.time/1e3+" seconds)")},toggle:function(a){a.stopPropagation(),q[f.autoplay?"pause":"play"]()}},r=function(){var a;return function(b,c,d){if(!a){if(a=setTimeout(function(){a=null},150),(!b||0>b)&&(b=0),f.loop||(K.toggleClass("pbHide",b==g.length-1),J.toggleClass("pbHide",0==b)),"function"==typeof f.beforeShow&&f.beforeShow(h[b]),T.removeClass("error"),i>=0&&T.addClass(b>i?"next":"prev"),_(b),ka(),I.empty(),D.onerror=null,H.add(I).data("zoom",1),l="video"==h[b].rel?"video":"image","video"==l)I.html(ba()).addClass("pbHide"),fa(c);else{var e=setTimeout(function(){T.addClass("pbLoading")},50);s&&T.addClass("pbHide"),f.autoplay&&q.progress.reset(),D=new Image,D.onload=function(){D.onload=null,m>=0&&(E.src=g[m][0]),n>=0&&(F.src=g[n][0]),clearTimeout(e),fa(c)},D.onerror=ea,D.src=j}N.on(B,ca).addClass("change"),(c||s)&&ca(),o.changeActive(b,c,d),da.save()}}}();var da={save:function(){"pushState"in window.history&&decodeURIComponent(window.location.hash.slice(1))!=j&&f.history&&window.history.pushState("photobox",b.title+"-"+g[i][1],window.location.pathname+window.location.search+"#"+encodeURIComponent(j))},load:function(){if(f&&!f.history)return!1;var b=decodeURIComponent(window.location.hash.slice(1));!b&&T.hasClass("show")&&la(),a('a[href="'+b+'"]').trigger("click.photobox")},clear:function(){f.history&&"pushState"in window.history&&window.history.pushState("photobox",b.title,window.location.pathname+window.location.search)}};window.onpopstate=function(){var a=window.onpopstate;return function(b){a&&a.apply(this,arguments),"photobox"==b.state&&da.load()}}(),a.event.special.swipe={setup:function(){a(this).bind("touchstart",a.event.special.swipe.handler)},teardown:function(){a(this).unbind("touchstart",a.event.special.swipe.handler)},handler:function(b){function j(){i.removeEventListener("touchmove",k),e=f=null}function k(d){d.preventDefault();var k=e-d.touches[0].pageX,l=f-d.touches[0].pageY;return Math.abs(k)>=20?(j(),g=k>0?-1:1):Math.abs(l)>=20&&(j(),h=l>0?1:-1),b.type="swipe",c.unshift(b,g,h),(a.event.dispatch||a.event.handle).apply(i,c)}var e,f,c=[].slice.call(arguments,1),d=b.originalEvent.touches,g=0,h=0,i=this;b=a.event.fix(b),1==d.length&&(e=d[0].pageX,f=d[0].pageY,this.addEventListener("touchmove",k,!1))}},!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b)["offsetParent"in a.fn?"offsetParent":"parent"]();return c.length||(c=a("body")),parseInt(c.css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),a(b).ready(V),window._photobox={DOM:{overlay:T},close:la,history:da,defaults:S}}(jQuery,document,window);